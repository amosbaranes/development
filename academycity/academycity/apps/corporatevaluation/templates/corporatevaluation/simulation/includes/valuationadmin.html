{% load static i18n cms_tags menu_tags sekizai_tags thumbnail %}
<div id="valuationadmin" class="tabcontent">
    <table>
        <tr><td>
            <label for="myCheck">Update Data For Companies:</label>
            <input type="checkbox" id="update_data_for_companies" onclick="update_data_for_companies()">
        </td></tr>
        <tr><td>
            <label for="myCheck">Update Quarterly Data:</label>
            <input type="checkbox" id="update_data_for_companiesq" onclick="update_data_for_companiesq(event)">
        </td></tr>
    </table><br/>
    <hr/>
    <h4>Fill cube data</h4>
    <table>
        <tr>
            <td onclick="analysis_setup_attribute(event)">
                <button fun="update_chart_of_accounts" style="width: 50px;">CofA</button>
                <button fun="update_companies" style="width: 50px;">Com</button>
                <button fun="update_time" style="width: 50px;">Time</button>
                <button fun="update_fact_table" style="width: 50px;">Fact</button>
                <button fun="get_data_for_ticker" style="width: 50px;">Pivot</button>
            </td><td>
                <input id="bi_attribute_name" type="text" value="ticker" size="4" placeholder="attribute name"/>
                <input id="bi_attribute_value" type="text" value="AAPL" size="4" placeholder="attribute value"/>
            </td>
        </tr>
    </table>
    <div id="result_message"></div><br/>

    <hr/>
    <h4>TDAmeriTrade</h4>
    <table>
        <tbody obj="TDAmeriTrade" attributes_id="tdameritrade_attributes">
        <tr id="buttons" onclick="activate_obj_function(event)">
            <td><button fun="get_prices" style="width: 60px;">hdata</button>
                <button fun="get_quote" style="width: 60px;">quote</button>
                <button fun="get_quotes" style="width: 60px;">quotes</button></td>
        </tr>
        <tr id="tdameritrade_attributes">
            <td>
                <input type="text" value="ticker" size="4" placeholder="name"/>
                <input type="text" value="AAPL" size="4" placeholder="value"/>
            </td>
        </tr>
        </tbody>
    </table>
    <div id="result_message_tdameritrade"></div><br/>
    <hr/>


    <table>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="load_sp_returns" style="width: 250px;">Load S&P 500 Returns</button>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="update_statistics" style="width: 122px;">updateStatis</button>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="admin_setup_attribute(event)" fun="get_announcement_time" attribute="m" attribute_value="5"
                        style="width: 122px;">annuacTime</button>
                <input id="attribute_name" type="text" value="m" size="4" placeholder="name"/>
                <input id="attribute_value" type="text" value="9" size="4" placeholder="value"/>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="tdameritrade_setup_w_attribute(event)" fun="update_options_statistics" style="width: 122px;">
                    UpOptionsStat</button>
                <button onclick="tdameritrade_setup_w_attribute(event)" fun="get_option_statistics_for_ticker" style="width: 122px;">
                    optionForTicker</button>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="tdameritrade_setup_w_attribute(event)" fun="get_quote" style="width: 122px;">get_quote</button>
                <button >Empty</button>
            </td>
        </tr>
    </table>
    <div id="result_message_options"></div><br/>
    <hr/>

    <table>
        <tr>
            <td>
                <button onclick="tdameritrade_setup_w_attribute(event)" fun="get_option_chain" style="width: 250px;">
                    get_option_chain
                </button>
            </td>
        </tr>
    </table>
    <hr/>
    <table>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="test" style="width: 250px;">test</button>
            </td>
        </tr>
        <tr>
            <td>
                <!--  in calculation tab -->
                <button onclick="get_risk_premium()" style="width: 250px;">Get Risk Premium</button>
            </td>
        </tr>
    </table>
    <hr/>
    <table>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="load_tax_rates_by_country_year" style="width: 250px;">Load Tax Rates By Country and Year</button>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="load_country_premium" style="width: 125px;">LCountryPrem</button>
                <button onclick="admin_setup(event)" fun="update_region_risk_premium" style="width: 125px;">URegionRiskPre</button>
            </td>
        </tr>
    </table>
    <hr/>
    <table>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="get_earning_forecast_sp500_view" style="width: 250px;">
                    get_earning_forecast_sp500_view
                </button>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="upload_old_earning_forecast_sp500" style="width: 250px;">
                    upload_old_earning_forecast_sp500
                </button>
            </td>
        </tr>
<!--  Get data for s&p500 forcast/actual
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="get_sp500" style="width: 250px;">get_sp500</button>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="get_earning_forecast_sp500" style="width: 250px;">
                    get_earning_forecast_sp500</button>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="get_ticker_prices" style="width: 250px;">get_ticker_prices</button>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="test" style="width: 250px;">test</button>
            </td>
        </tr>
-->
<!--
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="test1" style="width: 250px;">test1</button>
            </td>
        </tr>
-->
    </table>
    <hr/>
    <table>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="set_sic_code" style="width: 250px;">Load SIC Codes from SEC</button>
                <br/>
                <a href="https://en.wikipedia.org/wiki/Standard_Industrial_Classification" targte="_blank">
                    https://en.wikipedia.org/wiki/Standard_Industrial_Classificatio
                </a>
                <br/>
                <a href="https://www.sec.gov/corpfin/division-of-corporation-finance-standard-industrial-classification-sic-code-list" targte="_blank">
                    https://www.sec.gov/corpfin/division-of-corporation-finance-standard-industrial-classification-sic-code-list
                </a>
            </td>
        <tr/>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="get_all_companies" style="width: 250px;">Get All Companies</button>
                <br/>
                <a href="https://www.advfn.com/nyse/newyorkstockexchange.asp?companies=A" targte="_blank">
                    Using the link: https://www.advfn.com/nyse/newyorkstockexchange.asp?companies=A    with all letters A-Z
                </a>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="clean_data_for_all_companies" style="width: 250px;">Clean data for all companies</button>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="copy_processed_companies" style="width: 250px;">Copy processed companies</button><br/>
                Copy data from the processing table to the company table
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="admin_setup(event)" fun="get_duplications_tickers" style="width: 250px;">get_duplications_tickers</button><br/>
                Remove duplicate companies that trade in more than one exchange.
            </td>
        </tr>
    </table>
<!--
        <tr>
            <td>
                <button onclick="calculate_all()" style="width: 250px;">calculate_all()</button>
            </td>
        </tr>
        <tr>
            <td>
                <button onclick="v_analysis()" style="width: 250px;">V Analysis</button>
            </td>
        </tr>
    in the xbrl_data tab
    <button onclick="balance_accounts()" >balance_accounts()</button>
    <br/>
    <hr/>
   in the fsa tab
    <button onclick="ratio_analysis()" >ratio_analysis()</button>
    <button onclick="xbrl_set_data()" >Create data Table</button>
    <br/>
    <br/>
    <button onclick="generate_select_accounts('2020', 'AAPL')" >generate_select_accounts - 2020</button>
-->
    <br/><br/><br/><br/>
</div>

<script>
function update_data_for_companies() {
  var checkBox = document.getElementById("update_data_for_companies");
  if (checkBox.checked == true){
    vObj["is_update"] = "yes";
  } else {
    vObj["is_update"] = "no";
  }
}
function update_data_for_companiesq() {
  var checkBox = document.getElementById("update_data_for_companiesq");
  if (checkBox.checked == true){
    vObj["is_updateq"] = "yes";
  } else {
    vObj["is_updateq"] = "no";
  }
}
</script>
<!--  tdameritrade_setup_w_attribute -->
<script>
function tdameritrade_setup_w_attribute(event)
{
 e = event.target; fun_ = e.getAttribute("fun");
 attribute_ = "";
 attribute_value_ = "";
 //var ss = prompt("are you sure you want to run function: " + fun_ + "\nType Yes to run", 'No')
 //if(ss == '' || ss == 'No') { return;}
 message_div = document.getElementById("result_message")
 message_div.innerHTML = 'In process .. '
 $.post('{% url "corporatevaluation:tdameritrade_setup_w_attribute" %}',
      {
        fun: fun_,
        attribute: attribute_,
        attribute_value: attribute_value_
      },
      function(data){
        for (k in data)
        {
          if (k == 'status')
           {
            message_div.innerHTML = 'Process done with status: ' + data['status']
           }
           else
           {
                vObj[k] = data[k];
                // alert(k + " : " + data[k])
                // alert(vObj[k])
           }
        }
      }
    );
}
</script>
<!-- admin_setup(event) -->
<script>
function admin_setup(event)
{
 e = event.target; fun_ = e.getAttribute("fun");
 //var ss = prompt("are you sure you want to run function: " + fun_ + "\nType Yes to run", 'No')
 //if(ss == '' || ss == 'No') { return;}
 message_div = document.getElementById("result_message")
 message_div.innerHTML = 'In process .. '
 $.post('{% url "corporatevaluation:admin_setup" %}',
      {
        fun: fun_,
      },
      function(data){
        for (k in data)
        {
          if (k == 'status')
           {
            message_div.innerHTML = 'Process done with status: ' + data['status']
           }
           else
           {
                // alert(k + " : " + data[k])
                vObj[k] = data[k];
                // alert(vObj[k])
           }
        }
      }
    );
}
</script>

<!-- analysis_setup_attribute(event) -->
<script>
function analysis_setup_attribute(event)
{var e=event.target;var fun_=e.getAttribute("fun");
 message_div=document.getElementById("result_message");message_div.innerHTML='In process .. '
 try{
      var attribute_name_=document.getElementById("bi_attribute_name").value;
      var attribute_value_ = document.getElementById("bi_attribute_value").value;
      $.post('{% url "corporatevaluation:analysis_setup_attribute" %}',
          {
            fun: fun_,
            attribute: attribute_name_,
            attribute_value: attribute_value_
          },
          function(data){
            for (k in data)
            {
              if (k == 'status'){message_div.innerHTML='Process done with status: '+data['status']}
              else
              {
                    alert(k + " : " + data[k])
                    vObj[k] = data[k];
                    // alert(vObj[k])
              }
            }
          }
        );
 } catch(er){}
}
</script>

<!-- activate_obj_function -->
<script>
function activate_obj_function(event)
{
 var e=event.target;var p=e.parentNode.parentNode;var g=e.parentNode.parentNode.parentNode;
 // alert(e.outerHTML);alert(p.outerHTML);alert(g.outerHTML)
 var attributes=document.getElementById(g.getAttribute("attributes_id"))

 var obj_=g.getAttribute("obj");var fun_=e.getAttribute("fun");var dic_={};
 //alert(attributes.outerHTML)

 for(var k=0;k<attributes.children.length;k++)
 {dic_[attributes.children[k].children[0].value]=attributes.children[k].children[1].value}

 var message_div = document.getElementById("result_message_tdameritrade");message_div.innerHTML = 'In process for: '+dic_['ticker']
 //for(k in dic_){alert(k);alert(dic_[k]);}

 $.post('{% url "corporatevaluation:activate_obj_function" %}',
      {obj: obj_, fun: fun_, dic: JSON.stringify(dic_),},
      function(data){
        for (k in data)
        {
          if (k == 'status')
           {
            message_div.innerHTML = 'Process done with status: ' + data['status']
           }
           else
           {
                // alert(k + " : " + data[k])
                vObj[k] = data[k];
                // alert(vObj[k])
           }
        }
      }
    );

}
</script>

<!-- admin_setup_attribute -->
<script>
function admin_setup_attribute(event)
{
 var e=event.target;
 try{
      var attribute_name_=document.getElementById("attribute_name").value;
      if (attribute_name_=="")
      {
         var attribute_ = e.getAttribute("attribute");
         var attribute_value_ = e.getAttribute("attribute_value");
      } else
      {
         var attribute_ = attribute_name_;
         var attribute_value_ = document.getElementById("attribute_value").value;
      }
 } catch(er){alert(er)}
 var fun_ = e.getAttribute("fun");
 message_div = document.getElementById("result_message")
 message_div.innerHTML = 'In process .. '
 $.post('{% url "corporatevaluation:admin_setup_attribute" %}',
      {
        fun: fun_,
        attribute: attribute_,
        attribute_value: attribute_value_
      },
      function(data){
        for (k in data)
        {
          if (k == 'status')
           {
            message_div.innerHTML = 'Process done with status: ' + data['status']
           }
           else
           {
                // alert(k + " : " + data[k])
                vObj[k] = data[k];
                // alert(vObj[k])
           }
        }
      }
    );
}
</script>
